# Launcher Templates

Templates for generating launcher scripts and system prompt integration
across different agent harnesses.

## When to Use a Launcher vs. Instruction Files

**Use a launcher script** when the harness supports a `--system-prompt` flag
or equivalent. The launcher ensures the system prompt is loaded every session
without relying on the user to remember.

**Fold into instruction files** when the harness does not support system
prompts. The system prompt content goes into the harness-specific instruction
file (CLAUDE.md, AGENTS.md, .cursor/rules, etc.) as a preamble.

| Harness | Approach | File |
|---------|----------|------|
| Claude Code | Launcher script | `bin/ccf` |
| Codex | Fold into instruction file | `AGENTS.md` |
| Cursor | Fold into instruction file | `.cursor/rules` |
| Windsurf | Fold into instruction file | `.windsurfrules` |
| OpenCode | Fold into instruction file | `AGENTS.md` |
| Generic | Document the pattern | README or project docs |

## Claude Code Launcher

Claude Code supports `--system-prompt <file>` to load a system prompt at
session start.

### Template: `bin/ccf`

```bash
#!/usr/bin/env bash
set -euo pipefail
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"
claude --system-prompt "$PROJECT_DIR/SYSTEM_PROMPT.md" "$@"
```

### Setup

```bash
mkdir -p bin
# Create the launcher (content as above)
chmod +x bin/ccf
```

### Usage

```bash
# Instead of:
claude "implement the login feature"

# Use:
bin/ccf "implement the login feature"

# All claude flags pass through:
bin/ccf --model opus "implement the login feature"
bin/ccf  # interactive mode with system prompt loaded
```

### Extended Launcher with Working State

For projects using working state persistence, the launcher can check for
an existing WORKING_STATE.md and remind the agent to read it:

```bash
#!/usr/bin/env bash
set -euo pipefail
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
PROJECT_DIR="$(dirname "$SCRIPT_DIR")"

SYSTEM_PROMPT="$PROJECT_DIR/SYSTEM_PROMPT.md"

if [ ! -f "$SYSTEM_PROMPT" ]; then
  echo "Warning: $SYSTEM_PROMPT not found. Running without system prompt."
  exec claude "$@"
fi

exec claude --system-prompt "$SYSTEM_PROMPT" "$@"
```

## Codex Integration

Codex reads `AGENTS.md` for project instructions. Add system prompt content
as a preamble section.

### Template: `AGENTS.md` Preamble

```markdown
<!-- System Prompt - Generated by session-reflection skill -->
## Role and Constraints
You are a builder. You write code and tests.
You are NOT a reviewer or architect.

## Startup Procedure
1. Read WORKING_STATE.md if it exists
2. Run git status
3. Confirm current task

## Common Mistakes (NEVER do these)
- NEVER modify files outside src/ and test/
- NEVER add dependencies without approval
<!-- End System Prompt -->

---

[Rest of AGENTS.md content follows]
```

### Notes

- Keep the system prompt section at the top of AGENTS.md so it is read first
- Use HTML comments to mark the generated section boundaries
- When regenerating, replace only the content between the markers

## Cursor Integration

Cursor reads `.cursor/rules` for project instructions.

### Template: `.cursor/rules` Preamble

```
# System Prompt - Generated by session-reflection skill

## Role and Constraints
You are a builder. You write code and tests.
You are NOT a reviewer or architect.

## Common Mistakes (NEVER do these)
- NEVER modify files outside src/ and test/
- NEVER add dependencies without approval

# End System Prompt
---

[Rest of rules content follows]
```

## Windsurf Integration

Windsurf reads `.windsurfrules` for project instructions.

### Template

Same pattern as Cursor -- add system prompt as a preamble section with
clear boundary markers.

## Generic Pattern

For any harness that adds system prompt support in the future:

1. Check if the harness supports a `--system-prompt` flag or equivalent
2. If yes, create a launcher script following the Claude Code pattern
3. If no, identify the instruction file the harness reads and add a preamble
4. Always use boundary markers so the section can be regenerated cleanly

## Generation Checklist

When generating a launcher or instruction file integration:

- [ ] System prompt file (SYSTEM_PROMPT.md) exists and is under 500 tokens
- [ ] Launcher script is executable (chmod +x)
- [ ] Launcher passes through all arguments to the underlying command
- [ ] Launcher handles missing system prompt file gracefully
- [ ] For instruction file integration, boundary markers are in place
- [ ] bin/ directory is in .gitignore if launchers are user-specific
  (or committed if they are team-standard)
