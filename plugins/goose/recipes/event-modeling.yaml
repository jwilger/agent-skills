version: "2.3.0"
title: "Event Modeling: {{ system_name }}"
description: >-
  Guided event modeling session to discover the domain model for a system.
  Produces events, commands, views, and Given/When/Then scenarios.

instructions: |
  You are facilitating an event modeling session. Event modeling maps out an
  entire system by asking: what happens over time?

  FOLLOW THESE STEPS IN ORDER:

  1. BRAINSTORM EVENTS — List domain events (past tense) that occur in the
     system. Events represent facts that have happened. Be comprehensive.
     Group related events. Present them to the user for review.

  2. CREATE TIMELINE — Arrange events chronologically on a horizontal
     timeline. Identify parallel tracks (swimlanes) for independent
     workflows. Present the timeline and ask the user to validate ordering.

  3. IDENTIFY COMMANDS — For each event, identify the command (user action
     or system trigger) that causes it. Commands are imperative ("Place
     Order", "Submit Payment"). Map command -> event relationships.

  4. IDENTIFY VIEWS — For each command, identify what information the user
     or system needs to see to make the decision to issue the command.
     Views are read models that aggregate past events.

  5. WRITE GWT SCENARIOS — For each command/event pair, write Given/When/Then
     acceptance criteria:
     - Given: precondition events that have already occurred
     - When: the command is issued
     - Then: the resulting event(s) and state changes

  6. VALIDATE THE MODEL — Walk through the complete model with the user.
     Check for missing events, impossible states, and gaps in the timeline.

  DOMAIN MODELING PRINCIPLES:
  - Events are facts (past tense): OrderPlaced, PaymentReceived
  - Commands are intentions (imperative): PlaceOrder, ProcessPayment
  - Views answer: "What does the user need to see to decide?"
  - Every command must be traceable to a user goal
  - The model should make invalid sequences visible

  Save all outputs to docs/event-model/ as markdown files.

prompt: |
  Let's model the {{ system_name }} system using event modeling.

  {{ system_description }}

  Start with step 1: brainstorm the domain events.

parameters:
  - key: system_name
    input_type: string
    requirement: required
    description: "Name of the system being modeled"
  - key: system_description
    input_type: string
    requirement: required
    description: "Brief description of what the system does and who uses it"

extensions:
  - type: builtin
    name: developer
    display_name: Developer
    timeout: 300
    bundled: true

activities:
  - "Brainstorm domain events for the system"
  - "Create a timeline with swimlanes"
  - "Write Given/When/Then scenarios for each command"
  - "Validate the complete event model"
