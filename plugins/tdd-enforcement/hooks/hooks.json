{
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup|resume",
        "hooks": [
          {
            "type": "command",
            "command": "cd \"$CLAUDE_PROJECT_DIR\" && ${CLAUDE_PLUGIN_ROOT}/scripts/ensure-skills.sh",
            "statusMessage": "Checking required skills for tdd-enforcement...",
            "timeout": 60
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/enforce-phase-boundaries.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/enforce-domain-review.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "cd \"$CLAUDE_PROJECT_DIR\" && if [ -n \"$(git status --porcelain 2>/dev/null)\" ]; then echo '{\"decision\": \"block\", \"reason\": \"STOP BLOCKED â€” DIRTY WORKING TREE. You MUST take action NOW. Do NOT report this to the user and wait for instructions. Do NOT ask permission. (1) Run git status to see what changed. (2) Commit all meaningful work with a descriptive message. (3) If changes are experimental or broken, stash them with git stash -m WIP: description. Only after the working tree is clean may you end the session.\"}'; else echo '{\"continue\": true}'; fi",
            "timeout": 10
          }
        ]
      }
    ]
  }
}
